\section{Discussion}
\subsection{Discussion of Results}
Facing the result from the previous chapter, a few conclusions can be drawn. Generally, the results showed a good estimation accuracy by most sensor fusion algorithms, with small difference between the best performing algorithms (table \ref{tab:overall}).

% \vspace{-0.5cm}
\input{tables/overall}
% \vspace{-1.5cm}

The results showed that the algorithms had smaller displacement error than turn error which indicates that algorithms were generally better at estimating position than necessarily the shape of the experiment. Another conclusion was that absolute error increases with distance, since longer experiments had bigger absolute error rates than shorter experiments. Relative error measurements, on the other side, decreased in longer tests. Some unexpected surprises from less known algorithms such as \acrshort{oleq}, \acrshort{roleq}, \acrshort{saam}, Tilt, \acrshort{flae} and Davenport outperforming more well-established algorithms like the Complementary, \acrshort{ekf} and Madgwick.

From every test made, Mahony ranks best at displacement and with an average of 1.94 meters of absolute displacement error and 3.72\% relative error. Closely followed by \acrshort{saam} and Tilt with 2 meters of displacement error, and 4.12\% of relative displacement error (table \ref{tab:ranked_displacement}).

% \vspace{-0.5cm}
\input{tables/ranked_displacement}
% \vspace{-1.5cm}

\acrshort{saam} and Tilt ranked best at turn error both with an average of 2.79 meters of absolute turn error and 6.93\% of relative turn error. Closely followed by Mahony with 6.97\% meters of relative turn error (table \ref{tab:ranked_turn}).


On the other hand, Fourati had the worst general performance among all algorithms, with a 24.19 (36.14\% relative displacement error) meter error average displacement and 31.87 (48.16\% relative turn error) meter turn error average. Angular Rate, \acrshort{famc}, \acrshort{quest} and \acrshort{aqua} also had poor overall results generally performing under average of the other fusion algorithms.

From table \ref{tab:ahrs_algorithms}, it is possible to draw a correlation between what sensor are used by each algorithm and how they performed at estimating position. Tables \ref{tab:ranked_displacement} and \ref{tab:ranked_turn} show that the worst performing algorithms are generally the ones who don't use every sensor available, for instance \acrshort{famc}, \acrshort{quest} and \acrshort{aqua} don't fuse the gyro's readings to estimate orientation, while Angular Rate uses only the gyro's measurements. Fourati's poor performance might be explained by the fact that it depicts rigid body's attitude in space with respect to the navigation frame ($X_N$,$Y_N$,$Z_N$), where the navigation frame follows the convention \acrfull{ned}, opposite of the convention used by the other algorithms, \acrfull{enu}.

% \vspace{-0.5cm}
\input{tables/ranked_turn}
% \vspace{-1.5cm}


\subsection{Comparing with Related Work}

Ladetto et al. \cite{ladetto2002step} applied \acrshort{pdr} in urban and indoor areas seeking to assist blind people reaching unfamiliar locations along with aiming to facilitate emergency coordinators to track rescue workers. The study integrated a \acrshort{gps} receiver with a body mounted \acrshort{imu} applying pattern recognition to accelerometer signals, determining a user's step signature. They verified an average position error of 5\% of distance travelled which is significantly smaller than our results of 12\% average travelled error. Nonetheless, Ladetto et al. \cite{ladetto2002step} had \acrshort{gps} receivers and other sensors to help improve absolute position, which is not our case.

Stirling et al. \cite{stirling2003innovative} illustrate an experiment exploiting a shoe-mounted sensor prototype that calculates stride length with accelerometers and magnetometers. Their system measures angular acceleration by manipulating pairs of accelerometers as an alternative to gyroscopes. The foot pod stride length measurement was
generally less than 10\% different from the distances given by their control point
surveyed path. With a total distance estimated by the foot pod of 978 meters, compared to 862 meters for the survey. Which goes into conformity with our own results 12\% displacement error.

Simulation experiments conducted by Ludwig et al. \cite{ludwig2018comparison} using quadcopter data and results show that Mahony provides better orientation estimation than both Madgwick and EKF when using optimum parameters. The same authors tested on \cite{ludwig2018comparisonuav} quadcopters the \acrshort{ekf}, Madgwick, and Mahony filters. Results showed that Mahony delivered a more precise orientation estimation and faster execution time than Madgwick and \acrshort{ekf} which also goes in compliance with our results.

\subsection{Challenges Faced}

Common difficulties encountered when attempting to employ an accurate position estimation system lied significantly in the sensor's output reliability and consistency since these types of electronic devices are highly susceptible to the existence of errors. Ever since the beginning of the development of this project we realized calibration would play an important role if this idea was to ever take off. The observations made throughout the examining of other positioning systems have been that calibration ensures accurate measurements, and accurate measurements are the foundation to the quality of data. These discoveries lead to the significance of calibration as a means of reducing inaccuracies and increase data quality significantly. As seen in chapter \ref{sub:calibration}, several methods and algorithms have been established which evidently decreased the drift and noise components and have helped increase the accuracy of the positioning system. To build a precise positioning system utilizing low-cost \acrshort{mems} sensors was an exciting challenge that came with numerous obstacles. The system requirements were stringent owing to the environmental and economical requirements. To accomplish a superior precision, the electronic components ought to have a higher performance, higher resolution, and a higher sampling frequency.

Initially, this work planned to compare how estimation is affected by different settings (indoor, outdoor, and underwater), by creating the same setup for every environment and comparing how estimation was affected (underwater tests don't have dragging resistance which could influence displacement integration). This turned out to be more difficult than expected since we struggled to replicate the same experiments in every environment, couldn't find indoor locations that had enough space to replicate outdoor tests, the same happening with underwater tests. In the future, there should be an effort to make environmental comparison possible to better understand how position estimation is affected by the environment.

\subsection{Future Work}

Future work can expand upon this by experimenting with different hardware by utilizing new inertial sensors and microcontrollers, testing new environments such as aerial and nautical, and applying innovative solutions to sensor fusion such as machine learning and deep learning algorithms to learn and better decide how to perform the fusion of sensors. A benchmark comparison of the sensor fusion algorithms on computational performance would also be an interesting topic of research since computing efficiency is also a major variable in performing real time position estimation.
